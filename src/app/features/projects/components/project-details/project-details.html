<div class="relative bg-primary-600 rounded-2xl shadow-lg overflow-hidden">
  <div class="relative px-4 md:px-8 py-4 md:py-10">
    <div class="flex items-start justify-between gap-6 mb-8">
      <div class="flex-1">
        <div class="inline-flex items-center gap-2 px-3 py-1 bg-white/20 backdrop-blur-sm rounded-full mb-4">
          <i-lucide [name]="icons.FolderOpen" class="w-4 h-4 text-white" />
          <span class="text-sm font-medium text-white">{{ project().program.name || 'Programme' }}</span>
        </div>
        <h1 class="text-2xl md:text-4xl font-bold text-white mb-4 leading-tight">{{ project().name }}</h1>
        <div class="flex flex-wrap gap-2">
          @for (category of project().categories; track category.id) {
          <span class="px-4 py-2 bg-white/90 text-primary-700 rounded-full text-xs md:text-sm font-semibold shadow-sm">
            {{ category.name }}
          </span>
          }
        </div>
      </div>
      @if (project().project_manager) {
      <div class="hidden lg:block bg-white/10 backdrop-blur-md rounded-xl p-4 border border-white/20">
        <div class="text-xs text-white/80 mb-2">Chef de projet</div>
        <div class="flex items-center gap-3">
          <div class="w-10 h-10 bg-white/20 rounded-full flex items-center justify-center">
            <i-lucide [img]="icons.User" class="size-5 text-white" />
          </div>
          <div class="font-semibold text-white">{{ project().project_manager?.name }}</div>
        </div>
      </div>
      }
    </div>
    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 pt-8 border-t border-white/20">
      <div class="flex items-center gap-4">
        <div
          class="flex items-center justify-center size-10 bg-white/10 backdrop-blur-sm rounded-xl border border-white/20">
          <i-lucide [img]="icons.Calendar" class="size-5 text-white" />
        </div>
        <div>
          <div class="text-xs text-white/70 mb-1">Date de lancement</div>
          <div class="text-sm md:text-base font-bold text-white">
            {{ project().started_at | date : 'dd MMM yyyy' }}
          </div>
        </div>
      </div>
      <div class="flex items-center gap-4">
        <div
          class="flex items-center justify-center size-10 bg-white/10 backdrop-blur-sm rounded-xl border border-white/20">
          <i-lucide [img]="icons.Flag" class="size-5 text-white" />
        </div>
        <div>
          <div class="text-xs text-white/70 mb-1">Date de clôture</div>
          <div class="text-sm md:text-base font-bold text-white">
            {{ project().ended_at | date : 'dd MMM yyyy' }}
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 my-6">
  <div
    class="group relative bg-white rounded-xl shadow-sm border border-gray-200 p-5 hover:shadow-md hover:border-primary-300 transition-all duration-300">
    <div class="relative">
      <div
        class="inline-flex items-center justify-center w-11 h-11 bg-primary-50 rounded-xl mb-3 group-hover:scale-105 transition-transform">
        <i-lucide [img]="icons.Clock" class="w-5 h-5 text-primary-600" />
      </div>
      <div class="text-xs font-medium text-gray-500 mb-1.5">Durée estimée</div>
      <div class="text-2xl font-semibold text-gray-900">
        {{ project().duration_hours || '—' }} @if (project().duration_hours) {
        <span class="text-base text-gray-500 font-normal ml-1">heures</span>
        }
      </div>
    </div>
  </div>
  <div
    class="group relative bg-white rounded-xl shadow-sm border border-gray-200 p-5 hover:shadow-md hover:border-primary-300 transition-all duration-300">
    <div class="relative">
      <div
        class="inline-flex items-center justify-center w-11 h-11 bg-primary-50 rounded-xl mb-3 group-hover:scale-105 transition-transform">
        <i-lucide [img]="icons.User" class="w-5 h-5 text-primary-600" />
      </div>
      <div class="text-xs font-medium text-gray-500 mb-1.5">Chef de projet</div>
      <div class="text-base font-semibold text-gray-900 truncate">
        {{ project().project_manager?.name || 'Non assigné' }}
      </div>
    </div>
  </div>
  <div
    class="group relative bg-white rounded-xl shadow-sm border border-gray-200 p-5 hover:shadow-md hover:border-primary-300 transition-all duration-300">
    <div class="relative">
      <div
        class="inline-flex items-center justify-center w-11 h-11 bg-primary-50 rounded-xl mb-3 group-hover:scale-105 transition-transform">
        <i-lucide [img]="icons.User" class="w-5 h-5 text-primary-600" />
      </div>
      <div class="text-xs font-medium text-gray-500 mb-1.5">Programme</div>
      <div class="text-base font-semibold text-gray-900 truncate">
        {{ project().program.name || 'Non défini' }}
      </div>
    </div>
  </div>

  <!-- Status Card -->
  <div
    class="group relative bg-white rounded-xl shadow-sm border border-gray-200 p-5 hover:shadow-md hover:border-primary-300 transition-all duration-300">
    <div class="relative">
      <div
        class="inline-flex items-center justify-center w-11 h-11 bg-primary-50 rounded-xl mb-3 group-hover:scale-105 transition-transform">
        <i-lucide [img]="icons.Calendar" class="w-5 h-5 text-primary-600" />
      </div>
      <div class="text-xs font-medium text-gray-500 mb-1.5">Statut</div>
      <div class="text-base font-semibold text-gray-900 truncate">En cours</div>
    </div>
  </div>
</div>

<app-ui-accordion [multiple]="true">
  <app-ui-accordion-panel value="0">
    <app-ui-accordion-header>
      <div class="flex items-center gap-2 w-full py-2 px-2">
        <i-lucide [img]="icons.FileText" class="w-5 h-5 text-secondary-600" />
        <h5 class="font-medium text-gray-900">Présentation générale</h5>
      </div>
    </app-ui-accordion-header>
    <app-ui-accordion-content>
      <p class="text-gray-700 leading-relaxed whitespace-pre-line">
        {{ project().description || 'Aucune présentation disponible pour le moment.' }}
      </p>
    </app-ui-accordion-content>
  </app-ui-accordion-panel>
  <app-ui-accordion-panel value="1">
    <app-ui-accordion-header>
      <div class="flex items-center gap-2 w-full py-2 px-2">
        <i-lucide [img]="icons.BookOpen" class="w-5 h-5 text-primary-600" />
        <h5 class="font-medium text-gray-900">Contexte et justification</h5>
      </div>
    </app-ui-accordion-header>
    <app-ui-accordion-content>
      <p class="text-gray-700 leading-relaxed whitespace-pre-line">
        {{ project().context || 'Aucun contexte défini pour le moment.' }}
      </p>
    </app-ui-accordion-content>
  </app-ui-accordion-panel>
  <app-ui-accordion-panel value="2">
    <app-ui-accordion-header>
      <div class="flex items-center gap-2 w-full py-2 px-2">
        <i-lucide [img]="icons.Target" class="w-5 h-5 text-secondary-600" />
        <h5 class="font-medium text-gray-900">Objectifs visés</h5>
      </div>
    </app-ui-accordion-header>
    <app-ui-accordion-content>
      <p class="text-gray-700 leading-relaxed whitespace-pre-line">
        {{ project().objectives || 'Aucun objectif défini pour le moment.' }}
      </p>
    </app-ui-accordion-content>
  </app-ui-accordion-panel>
  <app-ui-accordion-panel value="3">
    <app-ui-accordion-header>
      <div class="flex items-center gap-2 w-full py-2 px-2">
        <i-lucide [img]="icons.SquareCheckBig" class="w-5 h-5 text-primary-600" />
        <h5 class="font-medium text-gray-900">Critères d'éligibilité</h5>
      </div>
    </app-ui-accordion-header>
    <app-ui-accordion-content>
      <p class="text-gray-700 leading-relaxed whitespace-pre-line">
        {{ project().selection_criteria || "Aucun critère d'éligibilité défini pour le moment." }}
      </p>
    </app-ui-accordion-content>
  </app-ui-accordion-panel>
</app-ui-accordion>
